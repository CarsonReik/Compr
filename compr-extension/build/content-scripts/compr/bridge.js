(()=>{"use strict";const o=(...o)=>{console.info("[Compr Extension]",...o)};window.addEventListener("message",async e=>{if(e.origin!==window.location.origin)return;const n=e.data;if("CONNECT_EXTENSION"===n.type){const{userId:e,authToken:s}=n.payload;o("Received connection request from website",{userId:e});try{const n=await chrome.runtime.sendMessage({type:"CONNECT_BACKEND",payload:{userId:e,authToken:s}});window.postMessage({type:"EXTENSION_CONNECTED",payload:{success:n.success}},window.location.origin),o("Extension connected successfully")}catch(o){((...o)=>{console.error("[Compr Extension]",...o)})("Failed to connect extension:",o),window.postMessage({type:"EXTENSION_CONNECTED",payload:{success:!1,error:o instanceof Error?o.message:"Unknown error"}},window.location.origin)}}}),window.postMessage({type:"EXTENSION_READY",payload:{}},window.location.origin),o("Compr bridge content script loaded")})();