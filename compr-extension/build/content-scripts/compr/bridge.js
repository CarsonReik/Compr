(()=>{"use strict";const e=(...e)=>{console.info("[Compr Extension]",...e)},o=(...e)=>{console.error("[Compr Extension]",...e)};window.addEventListener("message",async s=>{if(s.origin!==window.location.origin)return;const n=s.data;if("CONNECT_EXTENSION"===n.type){const{userId:s,authToken:t}=n.payload;e("Received connection request from website",{userId:s});try{const o=await chrome.runtime.sendMessage({type:"CONNECT_BACKEND",payload:{userId:s,authToken:t}});window.postMessage({type:"EXTENSION_CONNECTED",payload:{success:o.success}},window.location.origin),e("Extension connected successfully")}catch(e){o("Failed to connect extension:",e),window.postMessage({type:"EXTENSION_CONNECTED",payload:{success:!1,error:e instanceof Error?e.message:"Unknown error"}},window.location.origin)}}if("VALIDATE_CREDENTIALS"===n.type){const{platform:s,username:t,password:a}=n.payload;e("Received credential validation request",{platform:s,username:t});try{const o=await chrome.runtime.sendMessage({type:"VALIDATE_CREDENTIALS",payload:{platform:s,username:t,password:a}});window.postMessage({type:"CREDENTIALS_VALIDATED",payload:{success:o.success,error:o.error}},window.location.origin),e("Credential validation completed",{success:o.success})}catch(e){o("Failed to validate credentials:",e),window.postMessage({type:"CREDENTIALS_VALIDATED",payload:{success:!1,error:e instanceof Error?e.message:"Unknown error"}},window.location.origin)}}}),window.postMessage({type:"EXTENSION_READY",payload:{}},window.location.origin),e("Compr bridge content script loaded")})();